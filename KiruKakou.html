<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Phaser.js マウス軌跡デモ</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <script>
        const config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            backgroundColor: '#2d2d2d',
            scene: {
                create: create,
                update: update
            }
        };

        const game = new Phaser.Game(config);
        let graphics;
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;

        function create() {
            // グラフィックスオブジェクトを作成
            graphics = this.add.graphics();
            
            // マウスイベントを設定
            this.input.on('pointerdown', (pointer) => {
                isDrawing = true;
                lastX = pointer.x;
                lastY = pointer.y;
                // 描画をクリア
                graphics.clear();
            });

            this.input.on('pointermove', (pointer) => {
                if (isDrawing) {
                    // 線を描画
                    graphics.lineStyle(2, 0xffffff);
                    graphics.lineBetween(lastX, lastY, pointer.x, pointer.y);
                    
                    // 現在の位置を保存
                    lastX = pointer.x;
                    lastY = pointer.y;
                }
            });

            this.input.on('pointerup', () => {
                isDrawing = false;
                // マウスを離したら描画をクリア
                graphics.clear();
            });

            // 説明テキスト
            this.add.text(
                20, 20, 
                'マウスやタッチで線を描いてみてください。\n離すと消えます。', 
                { font: '16px Arial', fill: '#ffffff' }
            );
        }

        function update() {
            // 継続的な更新処理が必要な場合はここに記述
        }
    </script>
</body>
</html>